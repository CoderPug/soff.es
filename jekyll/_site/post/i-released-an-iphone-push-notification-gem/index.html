<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <title>samsoff.es - I Released an iPhone Push Notification Gem</title>
    <link href="http://feeds.feedburner.com/samsoffes/blog" rel="alternate" title="samsoff.es" type="application/atom+xml" />
    <link href="http://feeds.feedburner.com/samsoffes/the-experiment" rel="alternate" title="The Experiment Podcast" type="application/atom+xml" />
    <link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/iphone.css" media="only screen and (max-device-width: 480px)" rel="stylesheet" type="text/css" />
    <meta name="viewport" content="width=320, user-scalable=no" />
    <script src="/javascripts/application.js"></script>
    <script>var _gaq=_gaq || [];_gaq.push(['_setAccount','UA-5609322-1']);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);})();</script>
  </head>
  <body>
    <div id="border"></div>
    <div class="wrapper">
    	<div id="header" class="clear">
    		<h1><a href="/">sam<span>soff.es</span></a></h1>
    		<div>
      		<ul class="clear">
      			<li class="blog"><a href="/">Blog</a></li>
      			<li class="music"><a href="/music">Music</a></li>
      			<li class="about"><a href="/about">About</a></li>
      		</ul>
      	</div>
    	</div>
    	    	
      
<div class="post">
  <div class="title">
    <h2><a href="/post/i-released-an-iphone-push-notification-gem">I Released an iPhone Push Notification Gem</a></h2>
    <p class="meta">Posted 10 Nov 2009</p>
  </div>
  <div class="content">
    <p>I forked a Rails plugin for sending push notifications with Rails awhile back for a client project. I've had a few people fork and add cool little fixes.</p>

<p>I've been wanting to play with <a href="http://gemcutter.org">GemCutter</a> for awhile now. How hard could it be to release a Rails plugin as a gem, right? I sat down and rewatched a <a href="http://railscasts.com/episodes/183-gemcutter-jeweler">Railscast</a> on how to build a gems with <a href="http://github.com/technicalpickles/jeweler">Jeweler</a> and push it to <a href="http://gemcutter.org">GemCutter</a>. It turns out, that was the easy part. <a href="http://gemcutter.org">GemCutter</a> and <a href="http://github.com/technicalpickles/jeweler">Jeweler</a> made it so easy to publish my plugin as gem.</p>

<p>So I know this is very backwards, but <em>after</em> it was on <a href="http://gemcutter.org">GemCutter</a> I tested it my new gem. (Yes, many smacks on the hand for not writing test. I'm still learning all of that.) It turns out, that it was completely broken. I started to try and fix things, but ended up doing a complete rewrite.</p>

<p>Before, it would add the model in the plugin to your search path and then you would have to run a custom rake task in the plugin to add the table and migrate the database for the model. This always felt a little dirty, so I abstracted it all out. Now you can do:</p>

<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Device</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
    <span class="n">acts_as_pushable</span>
<span class="k">end</span>
</code></pre>
</div>


<p>Pretty cool, right? Now sending is as easy as</p>

<div class="highlight"><pre><code class="ruby"><span class="n">d</span><span class="o">.</span><span class="n">send_notification</span> <span class="ss">:alert</span> <span class="o">=&gt;</span> <span class="s2">&quot;Hello world!&quot;</span>
</code></pre>
</div>


<p>(<code>d</code> being an instance of <code>Device</code> of course). You can read the <a href="http://github.com/samsoffes/apple_push_notification">full readme on GitHub</a>. (Yes, another smack on the hand for no RDoc.)</p>

<p>Anyway, my code is probably very bad, as I'm pretty new to Ruby and Rails. I was very proud of myself for figuring it out. <em><a href="http://github.com/samsoffes/apple_push_notification">Check out the gem</a></em> and let me know if you find it useful or stupid.</p>

  </div>
</div>



    </div>
    <div id="footer" class="wrapper">
    	<p class="clear">
    	    <span>Copyright <a href="/">Sam Soffes</a> 2005-2010.</span>
    	    <span><a href="http://github.com/samsoffes/samsoff.es" target="_blank" rel="external nofollow">View source on GitHub</a>.</span>
      </p>
    </div>
  </body>
</html>
